<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Njabulo Jb â€“ Music Downloader</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* paste your CSS here (the block you just posted) */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',Arial,sans-serif; }
    body { background:#0f0f0f; color:#fff; min-height:100vh; padding:20px; }
    .container { max-width:1200px; margin:0 auto; }
    header { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; padding-bottom:20px; border-bottom:1px solid #333; }
    .logo { display:flex; align-items:center; gap:10px; font-size:24px; color:red; }
    .search-container { display:flex; gap:10px; width:100%; max-width:600px; }
    #searchInput { flex:1; padding:12px 15px; border-radius:30px; border:none; background:#282828; color:white; font-size:16px; }
    #searchBtn { padding:12px 20px; background:red; color:white; border:none; border-radius:30px; cursor:pointer; font-weight:bold; }
    .results-container { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:20px; margin-top:30px; }
    .song-card { background:#282828; border-radius:10px; overflow:hidden; transition:transform .3s; }
    .song-card:hover { transform:translateY(-5px); }
    .thumbnail { width:100%; height:180px; object-fit:cover; }
    .song-info { padding:15px; }
    .song-title { font-size:16px; margin-bottom:5px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .song-channel { color:#aaa; font-size:14px; margin-bottom:15px; }
    .song-duration { color:#aaa; font-size:12px; margin-bottom:15px; }
    .download-buttons { display:flex; gap:10px; }
    .download-btn { flex:1; padding:8px 12px; border-radius:5px; border:none; cursor:pointer; font-weight:bold; display:flex; align-items:center; justify-content:center; gap:5px; }
    .download-audio { background:#1DB954; color:white; }
    .download-video { background:#FF0000; color:white; }
    .player-container { position:fixed; bottom:0; left:0; right:0; background:#181818; padding:15px; display:none; align-items:center; gap:20px; border-top:1px solid #333; }
    .player-info { display:flex; align-items:center; gap:15px; flex:1; }
    .player-thumbnail { width:50px; height:50px; border-radius:5px; object-fit:cover; }
    .player-text { flex:1; }
    .player-title { font-size:14px; margin-bottom:5px; }
    .player-channel { font-size:12px; color:#aaa; }
    .player-controls { display:flex; align-items:center; gap:15px; }
    .control-btn { background:none; border:none; color:white; font-size:20px; cursor:pointer; }
    .progress-container { flex:2; height:5px; background:#333; border-radius:5px; cursor:pointer; }
    .progress-bar { height:100%; background:red; border-radius:5px; width:0%; }
    .loading { display:none; text-align:center; padding:20px; color:#aaa; }
    @media (max-width:768px) {
      header { flex-direction:column; gap:15px; }
      .search-container { width:100%; }
      .results-container { grid-template-columns:1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <i class="fa-brands fa-youtube"></i>
        <span>Njabulo Jb</span>
      </div>
      <div class="search-container">
        <input id="searchInput" type="text" placeholder="Search for songs...">
        <button id="searchBtn">Search</button>
      </div>
    </header>

    <div class="loading" id="loading">Loading...</div>

    <div class="results-container" id="results"></div>
  </div>

  <!-- Fixed bottom player -->
  <div class="player-container" id="player">
    <div class="player-info">
      <img class="player-thumbnail" id="playerThumb" src="">
      <div class="player-text">
        <div class="player-title" id="playerTitle"></div>
        <div class="player-channel">Njabulo Jb</div>
      </div>
    </div>
    <div class="player-controls">
      <button class="control-btn" onclick="playPause()"><i id="playIcon" class="fa fa-play"></i></button>
      <button class="control-btn" onclick="stop()"><i class="fa fa-stop"></i></button>
      <button class="control-btn" onclick="rewind()"><i class="fa fa-backward"></i></button>
      <button class="control-btn" onclick="forward()"><i class="fa fa-forward"></i></button>
    </div>
    <div class="progress-container" onclick="seek(event)">
      <div class="progress-bar" id="progress"></div>
    </div>
  </div>

  <audio id="audio" src=""></audio>

  <script>
    // ----- configuration -----
    const YT_SEARCH_URL = 'https://noobs-api.top/dipto/ytSearch'; // replace with your actual endpoint
    const DOWNLOAD_MP3   = 'https://noobs-api.top/dipto/ytDl3?link=';
    // ------------------------

    const searchInput = document.getElementById('searchInput');
    const searchBtn   = document.getElementById('searchBtn');
    const loading     = document.getElementById('loading');
    const resultsDiv  = document.getElementById('results');
    const playerDiv   = document.getElementById('player');
    const audioEl     = document.getElementById('audio');
    const playIcon    = document.getElementById('playIcon');
    const progressBar = document.getElementById('progress');

    let currentTrack = null;
    let isPlaying    = false;

    searchBtn.addEventListener('click', () => {
      const q = searchInput.value.trim();
      if (!q) return alert('Please type something to search');
      fetchResults(q);
    });

    async function fetchResults(query) {
      loading.style.display = 'block';
      resultsDiv.innerHTML = '';

      try {
        const resp = await fetch(`${YT_SEARCH_URL}?q=${encodeURIComponent(query)}`);
        const data = await resp.json();

        loading.style.display = 'none';
        if (!data.videos?.length) {
          resultsDiv.innerHTML = '<div class="loading">No videos found.</div>';
          return;
        }

        data.videos.forEach(v => {
          const card = document.createElement('div');
          card.className = 'song-card';
          const safeTitle = v.title.replace(/[\\/:*?"<>|]/g, '_');

          card.innerHTML = `
            <img class="thumbnail" src="${v.thumbnail}">
            <div class="song-info">
              <div class="song-title">${v.title}</div>
              <div class="song-channel">Njabulo Jb</div>
              <div class="song-duration">${v.timestamp}</div>
              <div class="download-buttons">
                <button class="download-btn download-audio"
                  onclick="loadTrack('${safeTitle}','${DOWNLOAD_MP3}${v.videoId}&format=mp3','${v.thumbnail}')">
                  <i class="fa fa-music"></i> Audio
                </button>
                <button class="download-btn download-video"
                  onclick="window.open('https://www.youtube.com/watch?v=${v.videoId}','_blank')">
                  <i class="fa fa-video"></i> Video
                </button>
              </div>
            </div>
          `;
          resultsDiv.appendChild(card);
        });
      } catch (err) {
        loading.style.display = 'none';
        resultsDiv.innerHTML = `<div class="loading">Error: ${err.message}</div>`;
      }
    }

    function loadTrack(title, url, thumb) {
      currentTrack = {title, url, thumb};
      audioEl.src = url;
      audioEl.load();
      document.getElementById('playerTitle').textContent = title;
      document.getElementById('playerThumb').src = thumb;
      playerDiv.style.display = 'flex';
      audioEl.addEventListener('timeupdate', updateProgress);
      playPause();
    }

    function playPause() {
      if (!currentTrack) return;
      if (isPlaying) {
        audioEl.pause();
        playIcon.className = 'fa fa-play';
      } else {
        audioEl.play();
        playIcon.className = 'fa fa-pause';
      }
      isPlaying = !isPlaying;
    }

    function stop() {
      audioEl.pause();
      audioEl.currentTime = 0;
      playIcon.className = 'fa fa-play';
      isPlaying = false;
      updateProgress();
    }

    function rewind() {
      audioEl.currentTime = Math.max(0, audioEl.currentTime - 10);
    }

    function forward() {
      audioEl.currentTime = Math.min(audioEl.duration, audioEl.currentTime + 10);
    }

    function updateProgress() {
      const pct = (audioEl.currentTime / audioEl.duration) * 100;
      progressBar.style.width = `${pct}%`;
    }

    function seek(e) {
      const rect = e.currentTarget.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const pct = Math.min(100, Math.max(0, (x / rect.width) * 100));
      audioEl.currentTime = (pct / 100) * audioEl.duration;
      progressBar.style.width = `${pct}%`;
    }
  </script>
</body>
          </html> 
